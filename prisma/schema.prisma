generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

// CockroachDB connection

// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// generator client {
//   provider = "prisma-client-js"
// }

// datasource db {
//   provider = "cockroachdb"
//   url      = env("DATABASE_URL")
// }

// model Widget {
//   id String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
// }

model Team {
  id         String         @id @default(uuid())
  name       String         @unique
  icon       String
  city       String
  conference String
  division   String
  urlSlug    String
  details    TeamDetails?
  schedule   ScheduleGame[]
  roster     Player[]
  stats      TeamStat?
}

model TeamDetails {
  id      String @id @default(uuid())
  rank    String
  wins    String
  losses  String
  ties    String
  coach   String
  stadium String
  team    Team   @relation(fields: [team_id], references: [id])
  team_id String @unique
}

model TeamStat {
  id               String               @id @default(uuid())
  first_downs      TeamFirstDown?
  down_conversions TeamDownConversion[]
  offense          TeamOffense[]
  sacks            String
  field_goals      TeamFieldGoal?
  touch_downs      TeamTouchDown?
  turnover_ratio   String
  team             Team                 @relation(fields: [team_id], references: [id])
  team_id          String               @unique
}

model TeamTouchDown {
  id           String   @id @default(uuid())
  total        String
  rushing      String
  passing      String
  returns      String
  defensive    String
  team_stat    TeamStat @relation(fields: [team_stat_id], references: [id])
  team_stat_id String   @unique
}

model TeamFieldGoal {
  id           String   @id @default(uuid())
  successful   String
  attempts     String
  team_stat    TeamStat @relation(fields: [team_stat_id], references: [id])
  team_stat_id String   @unique
}

model TeamOffense {
  id            String   @id @default(uuid())
  type          String // General Rushing Passing
  total_yards   String
  plays         String
  average_yards String
  team_stat     TeamStat @relation(fields: [team_stat_id], references: [id])
  team_stat_id  String   @unique
}

model TeamFirstDown {
  id                String   @id @default(uuid())
  total_first_downs String
  rushing           String
  passing           String
  penalty           String
  team_stat         TeamStat @relation(fields: [team_stat_id], references: [id])
  team_stat_id      String   @unique
}

model TeamDownConversion {
  id           String   @id @default(uuid())
  down         String
  successful   String
  attempts     String
  team_stat    TeamStat @relation(fields: [team_stat_id], references: [id])
  team_stat_id String
}

model ScheduleGame {
  id         String @id @default(uuid())
  gameUrl    String
  date       String
  opponent   String // Team relation
  homeOrAway String
  outcome    String
  score      String
  team       Team   @relation(fields: [team_id], references: [id])
  team_id    String
}

model Player {
  id         String  @id @default(uuid())
  slugUrl    String?
  headshot   String?
  name       String
  number     String?
  position   String?
  height     String
  weight     String
  experience String?
  college    String?
  status     String?
  team       Team    @relation(fields: [team_id], references: [id])
  team_id    String
}

// model Stat {
//   id        String  @id @default(uuid())
//   season    String?
//   category  String?
//   team      String?
//   title     String?
//   stat      String?
//   player    Player  @relation(fields: [player_id], references: [id])
//   player_id String
// }
